<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="partials/head :: head('Admin Dashboard')">
</head>
<body>

<nav th:replace="partials/navbar :: nav"></nav>
<main>

    <!--Need to verify ADMIN-->
    <!--<div sec:authorize="isAuthenticated()">-->
    <!--<h1>Welcome, <span th:text="${user.username}"></span></h1>-->

    <h1>Welcome, User</h1>

    <div class="container" style="position: absolute; margin-left: 5%; width: 90%;">

        <div class="row">

            <!--        profile picture of Admin-->

            <div class="col s4 card-panel hoverable" style="border: 2px solid black; margin-top: 0;"><span
                    class="flow-text">Picture will go here</span></div>

            <!--        table of users-->

            <div class="col s8" style=" border: 2px solid black; margin-top: 0;">
                <table class="responsive-table centered highlight" style="margin-top: 0;">
                    <thead>
                    <tr>
                        <th>ID#</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Gender</th>
                        <th>League</th>
                        <th>Date of Birth</th>
                        <th>Edit / Delete</th>
                    </tr>
                    </thead>
                    <tbody>
                    <th:block th:each="user : ${users}">
                        <tr>
                            <td th:text="${user.id}"></td>
                            <td th:text="${user.firstName + ' ' + user.lastName}"></td>
                            <td th:text="${user.email}">theiremail@live.com</td>
                            <td th:text="${user.gender}"></td>
                            <td th:text="${user.getLeague().name}"></td>
                            <td th:text="${user.DOB}"></td>
                            <td>
                                <a class="btn btn-primary" th:hidden="${user.id}">Disable</a>

                                <!--  ////////////////////              THIS WILL BE USED LATER           \\\\\\\\\\\\\\\\\\\   -->
                                <!--                           th:href="@{'/userprofile/'+${user.id} + '/disable'}">-->
                                <!--                           <a sec:authorize="isAuthenticated()"-->
                                <a class="btn btn-warning mt-1" th:hidden="${user.id}"
                                   th:href="@{'/edituser/'+${user.id}}">
                                    Edit
                                </a>
                            </td>
                        </tr>
                    </th:block>
                    </tbody>


                </table>
            </div>
        </div>

        <!--Buttons-->
        <div>

            <a class="waves-effect waves-light btn " th:href="@{'/createmachine'}">Machines</a>
            <a class="waves-effect waves-light btn " th:href="@{'/createleague'}">Leagues</a>
            <a class="waves-effect waves-light btn " th:href="@{'/creategroup'}">Groups</a>

        </div>

        <!--*****************-->
        <!--                Bottom Nav Card Below              -->
        <!--*****************-->


        <div class="container" style="width: 100%;">
            <div class="card row" style="position: inherit;">
                <div class="card-tabs" style="height: 20px;">
                    <ul class="tabs tabs-fixed-width">
                        <li class="tab"><a href="#CreateGroups" class="active">Groups</a></li>
                        <li class="tab"><a href="#CreateMachines" >Machines</a></li>
                        <li class="tab"><a href="#ScoreForm">Competition Day Score Form</a></li>
                    </ul>
                </div>

                <div class="card-content grey lighten-4">
                    <form th:action="@{/admindashboard/creategrouping}" method="post">
                        <div id="CreateGroups">
                            <h3>Select Your Users For Todays Groups</h3>
                            <p><em>(Remember 4 Users Per Group)</em></p>
                            <table class="responsive-table centered highlight">
                                <thead>
                                <tr>
                                    <th>ID#</th>
                                    <th>Name</th>
                                    <th>Gender</th>
                                    <th>League</th>
                                    <th>Active Today</th>
                                </tr>
                                </thead>
                                <tbody>
                                <th:block th:each="user : ${users}">
                                    <tr>
                                        <td th:text="${user.id}"></td>
                                        <td th:text="${user.firstName + ' ' + user.lastName}"></td>
                                        <td th:text="${user.gender}"></td>
                                        <td th:text="${user.getLeague().name}"></td>
                                        <td>
                                            <p>
                                                <label>
                                                    <input name="uchecked" th:value="${user.id}" type="checkbox"/>
                                                    <span></span>
                                                </label>
                                            </p>
                                        </td>
                                    </tr>
                                </th:block>
                                </tbody>
                            </table>
                            <br/>
                            <h4>Select A Group</h4>
                            <label>Group</label>
                            <select class="browser-default" name="group_id">
                                <th:block th:each="group : ${groups}">
                                    <option  th:value="${group.id}"
                                            th:text="${group.name}"></option>
                                </th:block>
                            </select>
<!--                            <a class="tab waves-effect waves-light btn " href="#CreateMachines" >Get Todays Machines</a>-->
                        </div>
                        <div id="CreateMachines">
                            <h3>Select Your Machines</h3>
                            <table class="responsive-table centered highlight">
                                <thead>
                                <tr>
                                    <th>ID#</th>
                                    <th>Name</th>
                                    <th>Active</th>
                                </tr>
                                </thead>
                                <tbody>
                                <th:block th:each="machine : ${machines}">
                                    <tr>
                                        <td th:text="${machine.id}"></td>
                                        <td th:text="${machine.name}"></td>
                                        <td>
                                            <p>
                                                <label>
                                                    <input name="mchecked" th:value="${machine.id}" type="checkbox"/>
                                                    <span></span>
                                                </label>
                                            </p>
                                        </td>
                                    </tr>
                                </th:block>
                                </tbody>
                            </table>
                            <br/>
                            <button type="submit" class="btn btn-primary mt-1">Submit</button>
                        </div>
                    </form>

                    <div class="container" id="ScoreForm">
                        <form th:action="@{/week-scores}" method="POST" th:object="${score}">

                            <label>Player</label>
                            <select class="browser-default" th:field="*{user}">
                                <th:block th:each="newUser : ${userselect}">
                                    <option name="user" th:value="${newUser.getId()}"
                                            th:text="${newUser.username}"></option>
                                </th:block>
                            </select>

                            <label>Machine</label>
                            <select class="browser-default" th:field="*{machine}">
                                <th:block th:each="newMachine : ${machiness}">
                                    <option name="machine" th:value="${newMachine.id}"
                                            th:text="${newMachine.name}"></option>
                                </th:block>
                            </select>

                            <div class="input-field col s6">
                                <label for="score">New Score</label>
                                <input th:field="*{score}" placeholder="0" id="score" type="text" class="validate"/>
                            </div>

                            <br/>
                            <br/>
                            <!--<input value="Sign me up!" type="submit" /> -->
                            <div class="center-align">
                                <button type="submit" class="btn btn-primary">Submit Score</button>
                            </div>
                        </form>
                        <br/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>


<footer>
    <div th:replace="partials/footer :: footer"></div>
    <th:block th:include="partials/footer :: scripts"/>
</footer>

</body>
</html>